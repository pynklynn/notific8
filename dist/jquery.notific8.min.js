/**
* @author Will Steinmetz
* Notification plug-in inspired by the notification style of Windows 8
* Copyright (c)2013-2016, Will Steinmetz
* Licensed under the BSD license.
* http://opensource.org/licenses/BSD-3-Clause
*/
"use strict";var notific8,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};notific8=function(){function w(e){var t=e.settings,n=t.verticalEdge,i=t.horizontalEdge,o="."+t.namespace+"-container."+n+"."+i;return document.querySelector(o)}function B(e,n){var i,o,a,s,r,t=document.getElementById(e);null!==t&&(t.className=t.className.replace("open",""),i=t,o=e,a=w(n),r=s=void 0,setTimeout(function(){if(a.removeChild(i),delete notific8DataStore[o],n.settings.onClose.length)for(var e=0,t=(r=n.settings.onClose).length;e<t;e++)(0,r[e])(i,n);notific8Defaults.queue&&notific8Queue.length&&(s=notific8Queue.shift(),notific8(s.message,s.options))},200))}function c(e,t){var n,i=["onInit","onCreate","onClose"],o={settings:{},message:e},a=void 0,s=void 0,r=void 0;for(a in notific8Defaults)s=notific8Defaults[a],o.settings[a]=s;for(a in t)if(s=t[a],-1<i.indexOf(a)){"function"==typeof s&&(s=[s]);for(var c=0,l=s.length;c<l;c++)o.settings[a].push(s[c])}else o.settings[a]=s;for(var f=0,d=(n=["onContainerCreate","queue"]).length;f<d;f++)delete o.settings[n[f]];if(function(n){var e,t,i,o,a,s,r=document.getElementsByTagName("body")[0],c=w(n),l=(t=void 0,"legacy"===(e=n).settings.theme.toLowerCase()&&(e.settings.theme="ocho"),t=[e.settings.namespace+"-notification","family-"+e.settings.theme,e.settings.theme,e.settings.color],e.settings.sticky&&t.push("sticky"),null!==e.settings.heading&&"string"==typeof e.settings.heading&&t.push("has-heading"),t),f=n.settings.namespace,d=Number(r.dataset.notific8s)+1,u=n.settings.id?n.settings.id.replace(/\s/g,"-"):f+"-notification-"+d,g='<article class="$notificationClasses" id="'+u+'" data-name="'+n.settings.notificationName+'" role="status" aria-live="polite">',m=notific8RegisteredModules.beforeContent,h=notific8RegisteredModules.afterContent,p=n.settings.onCreate;r.dataset.notific8s=d;for(var v=0,y=m.length;v<y;v++){var C=m[v].callbackMethod(n);l=l.concat(C.classes),g+=C.html}g+='<div class="'+n.settings.namespace+'-message-content">'+(null!==(i=n).settings.heading&&"string"==typeof i.settings.heading?'<header class="'+i.settings.namespace+'-heading"></header>':"")+' <div class="'+n.settings.namespace+'-message"></div></div>';for(var x=0,b=h.length;x<b;x++){var E=h[x].callbackMethod(n);l=l.concat(E.classes),g+=E.html}if(g=(g+=(a=[(o=n).settings.namespace+"-close"],s="&times;",o.settings.sticky&&(a.push("sticky"),s=o.settings.closeText),'<button type="button" class="'+a.join(" ")+'" aria-label="dismiss notification">'+s+"</button></article>")).replace("$notificationClasses",l.join(" ")),c.innerHTML+=g,void 0!==n.settings.heading){var N=c.getElementsByClassName(n.settings.namespace+"-heading");N[0<N.length?N.length-1:0].textContent=""+n.settings.heading}if(void 0!==n.message){var D=c.getElementsByClassName(n.settings.namespace+"-message");D[0<D.length?D.length-1:0].textContent=""+n.message}for(var M=0,k=p.length;M<k;M++)(0,p[M])(g,n);setTimeout(function(){var e,t=document.getElementById(u);t&&(t.className+=" open",(notific8DataStore[u]=n).settings.sticky||(e=Number(n.settings.life)+200,setTimeout(function(){B(u,n)},e)))},5)}(o),o.settings.onInit.length)for(var u=0,g=(r=o.settings.onInit).length;u<g;u++)(0,r[u])(o)}function l(e){throw console.error(e),new Error(e)}return window.notific8Defaults={life:1e4,theme:"ocho",color:"teal",sticky:!1,verticalEdge:"right",horizontalEdge:"top",zindex:1100,closeText:"close",onInit:[],onCreate:[],onClose:[],namespace:"notific8",queue:!1},window.notific8RegisteredModules={beforeContent:[],afterContent:[],beforeContainer:[],afterContainer:[],insideContainer:[]},window.notific8Queue=[],window.notific8DataStore={},window.notific8ContainerHandlers={onContainerCreate:[]},function(e,t){var n,i,o=void 0,a=void 0,s=void 0;switch("string"!=typeof e&&l("notific8 takes a string message as the first parameter"),void 0===t&&(t={}),"object"!==(void 0===t?"undefined":_typeof(t))||t.hasOwnProperty("namespace")||"zindex"===e||(t.namespace="notific8"),e){case"configure":case"config":return function(e){var t=void 0,n=void 0;for(t in e)n=e[t],-1<["onInit","onCreate","onClose"].indexOf(t)?"function"==typeof n?notific8Defaults[t].push(n):notific8Defaults[t]=notific8Defaults[t].concat(n):"onContainerCreate"===t?"function"==typeof n?notific8ContainerHandlers.onContainerCreate.push(n):notific8ContainerHandlers.onContainerCreate=notific8ContainerHandlers.onContainerCreate.concat(n):notific8Defaults[t]=n}(t);case"zindex":return i=t,void(notific8Defaults.zindex=i);case"destroy":return function(e){for(var t=e.namespace+"-container",n=document.getElementsByClassName(t),i=document.getElementsByTagName("body")[0];0<n.length;)i.removeChild(n[0])}(t);case"remove":return function(e){for(var t=e.namespace+"-notification",n=document.getElementsByClassName(t);0<n.length;)n[0].parentNode.removeChild(n[0])}(t);case"removeFromQueue":return function(e){var t=void 0,n=void 0;"object"!==(void 0===e?"undefined":_typeof(e))&&(e=[e]);for(var i=0,o=e.length;i<o;i++)for(t in n=e[i],notific8Queue)if(notific8Queue[t].options.notificationName===n){notific8Queue.splice(t,1);break}}(t);case"registerModule":5!==arguments.length&&l("Registering a module requires the parameters moduleName, position, defaultOptions, and callbackMethod."),e=arguments[0];var r=Array.prototype.slice.call(arguments);return function(e,t,n,i){var o,a=void 0,s=void 0;"string"==typeof e&&""!==e.trim()||l("moduleName should be a string"),"string"==typeof t&&-1!==["beforeContent","afterContent","beforeContainer","afterContainer","insideContainer"].indexOf(t)||l("position should be a string"),"object"!==(void 0===n?"undefined":_typeof(n))&&l("defaultOptions should be an object"),"function"!=typeof i&&l("callbackMethod should be an function");for(var r=0,c=(o=notific8RegisteredModules[t]).length;r<c;r++)o[r].moduleName===e&&l("Module '"+e+"' has already been registered");for(s in n)a=n[s],notific8Defaults[s]=a;return notific8RegisteredModules[t].push({moduleName:e,callbackMethod:i})}(r[1],r[2],r[3],r[4]);default:return o=t.namespace+"-container",0===document.getElementsByClassName(o).length&&function(o){for(var e,t,n,i,a,s,r=document.getElementsByTagName("body")[0],c=[o.namespace+"-container"],l="",f=r.dataset.notific8s=0,d=(e=notific8RegisteredModules.beforeContainer).length;f<d;f++){var u=e[f].callbackMethod(notific8Defaults);c=c.concat(u.classes),l+=u.html}l+='<div class="$classes $pos">';for(var g=0,m=(t=notific8RegisteredModules.insideContainer).length;g<m;g++){var h=t[g].callbackMethod(notific8Defaults);c=c.concat(h.classes),l+=h.html}l+="</div>";for(var p=0,v=(n=notific8RegisteredModules.afterContainer).length;p<v;p++){var y=n[p].callbackMethod(notific8Defaults);c=c.concat(y.classes),l+=y.html}for(var C=0,x=(i=["top right","top left","bottom right","bottom left"]).length;C<x;C++){var b=i[C],E=l.replace("$pos",b).replace("$classes",c.join(" ")),N=document.implementation.createHTMLDocument("tempDoc");N.body.innerHTML=E,document.body.appendChild(N.body.firstChild)}for(var D=0,M=(a=document.getElementsByClassName(c[0])).length;D<M;D++){var k=a[D];k.style.zIndex=notific8Defaults.zindex;for(var w=0,z=(s=notific8ContainerHandlers.onContainerCreate).length;w<z;w++)(0,s[w])(k,o);k.addEventListener("click",function(e){var t,n=e.target.parentElement,i=o.namespace+"-notification";-1!==n.className.split(" ").indexOf(i)&&(t=notific8DataStore[n.id],B(n.id,t))})}}(t),(n=t).verticalEdge=(n.verticalEdge||notific8Defaults.verticalEdge).toLowerCase(),n.horizontalEdge=(n.horizontalEdge||notific8Defaults.horizontalEdge).toLowerCase(),-1===["left","right"].indexOf(n.verticalEdge)&&(n.verticalEdge=notific8Defaults.verticalEdge),-1===["top","bottom"].indexOf(n.horizontalEdge)&&(n.horizontalEdge=notific8Defaults.horizontalEdge),a=t.namespace+"-notification",s=document.getElementsByClassName(a).length,t.notificationName||(t.notificationName="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t;return t=16*Math.random()|0,("x"===e?t:3&t|8).toString(16)})),notific8Defaults.queue&&0!==s?notific8Queue.push({message:e,options:t}):c(e,t),t.notificationName}}}(),jQuery.notific8=function(e,t){notific8(e,t)};