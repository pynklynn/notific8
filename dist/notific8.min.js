/**
* @author Will Steinmetz
* Notification plug-in inspired by the notification style of Windows 8
* Copyright (c)2013-2016, Will Steinmetz
* Licensed under the BSD license.
* http://opensource.org/licenses/BSD-3-Clause
*/"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},notific8;notific8=function(){function a(a){for(var b=a.namespace+"-container",c=document.getElementsByClassName(b),d=document.getElementsByTagName("body")[0];c.length>0;)d.removeChild(c[0])}function b(a){var b=a.settings,c=b.verticalEdge,d=b.horizontalEdge,e=b.namespace,f="."+e+"-container."+c+"."+d;return document.querySelector(f)}function c(a){var b=[a.settings.namespace+"-close"],c="&times;";return a.settings.sticky&&(b.push("sticky"),c=a.settings.closeText),'<button type="button" class="'+b.join(" ")+'" aria-label="dismiss notification">'+c+"</button>"}function d(a){return null!==a.settings.heading&&"string"==typeof a.settings.heading?'<header class="'+a.settings.namespace+'-heading">'+a.settings.heading+"</header>":""}function e(a){return'<div class="'+a.settings.namespace+'-message">'+a.message+"</div>"}function f(a){var b=void 0;return"legacy"===a.settings.theme.toLowerCase()&&(a.settings.theme="ocho"),b=[a.settings.namespace+"-notification","family-"+a.settings.theme,a.settings.theme,a.settings.color],a.settings.sticky&&b.push("sticky"),null!==a.settings.heading&&"string"==typeof a.settings.heading&&b.push("has-heading"),b}function g(a){var g=document.getElementsByTagName("body")[0],i=b(a),j=f(a),k=a.settings.namespace,l=Number(g.dataset.notific8s)+1,m=a.settings.id?a.settings.id.replace(/\s/g,"-"):k+"-notification-"+l,n='<article class="$notificationClasses" id="'+m+'" data-name="'+a.settings.notificationName+'" role="status" aria-live="polite">',o=notific8RegisteredModules.beforeContent,p=notific8RegisteredModules.afterContent,q=a.settings.onCreate;g.dataset.notific8s=l;for(var r=0,s=o.length;s>r;r++){var t=o[r],u=t.callbackMethod(a);j=j.concat(u.classes),n+=u.html}n+='<div class="'+a.settings.namespace+'-message-content">'+d(a)+" "+e(a)+"</div>";for(var v=0,w=p.length;w>v;v++){var x=p[v],y=x.callbackMethod(a);j=j.concat(y.classes),n+=y.html}n+=c(a)+"</article>",n=n.replace("$notificationClasses",j.join(" ")),i.innerHTML+=n;for(var z=0,A=q.length;A>z;z++){var B=q[z];B(n,a)}setTimeout(function(){var b=document.getElementById(m);b&&(b.className+=" open",notific8DataStore[m]=a,a.settings.sticky||!function(b,c){setTimeout(function(){h(m,a)},c)}(b,Number(a.settings.life)+200))},5)}function h(a,c){var d=document.getElementById(a);null!==d&&(d.className=d.className.replace("open",""),function(a,d){var e=b(c),f=void 0,g=void 0,h=void 0;setTimeout(function(){if(e.removeChild(a),delete notific8DataStore[d],c.settings.onClose.length){h=c.settings.onClose;for(var b=0,i=h.length;i>b;b++)(g=h[b])(a,c)}notific8Defaults.queue&&notific8Queue.length&&(f=notific8Queue.shift(),notific8(f.message,f.options))},200)}(d,a))}function i(a){var b=void 0,c=void 0;for(b in a)c=a[b],["onInit","onCreate","onClose"].indexOf(b)>-1?"function"==typeof c?notific8Defaults[b].push(c):notific8Defaults[b]=notific8Defaults[b].concat(c):"onContainerCreate"===b?"function"==typeof c?notific8ContainerHandlers.onContainerCreate.push(c):notific8ContainerHandlers.onContainerCreate=notific8ContainerHandlers.onContainerCreate.concat(c):notific8Defaults[b]=c}function j(a){for(var b=a.namespace+"-notification",c=document.getElementsByClassName(b);c.length>0;)c[0].parentNode.removeChild(c[0])}function k(a){var b=void 0,c=void 0;"object"!==("undefined"==typeof a?"undefined":_typeof(a))&&(a=[a]);for(var d=0,e=a.length;e>d;d++){c=a[d];for(b in notific8Queue)if(notific8Queue[b].options.notificationName===c){notific8Queue.splice(b,1);break}}}function l(a){notific8Defaults.zindex=a}function m(a,b){var c=["onInit","onCreate","onClose"],d={settings:{},message:a},e=void 0,f=void 0,h=void 0,i=void 0,j=void 0;for(e in notific8Defaults)h=notific8Defaults[e],d.settings[e]=h;for(e in b)if(h=b[e],c.indexOf(e)>-1){"function"==typeof h&&(h=[h]);for(var k=0,l=h.length;l>k;k++)d.settings[e].push(h[k])}else d.settings[e]=h;i=["onContainerCreate","queue"];for(var m=0,n=i.length;n>m;m++)delete d.settings[i[m]];if(g(d),d.settings.onInit.length){j=d.settings.onInit;for(var o=0,p=j.length;p>o;o++)(f=j[o])(d)}}function n(a){var b,c,d,e,f,g,i=document.getElementsByTagName("body")[0],j=[a.namespace+"-container"],k="";i.dataset.notific8s=0,b=notific8RegisteredModules.beforeContainer;for(var l=0,m=b.length;m>l;l++){var n=b[l],o=n.callbackMethod(notific8Defaults);j=j.concat(o.classes),k+=o.html}k+='<div class="$classes $pos">',c=notific8RegisteredModules.insideContainer;for(var p=0,q=c.length;q>p;p++){var r=c[p],s=r.callbackMethod(notific8Defaults);j=j.concat(s.classes),k+=s.html}k+="</div>",d=notific8RegisteredModules.afterContainer;for(var t=0,u=d.length;u>t;t++){var v=d[t],w=v.callbackMethod(notific8Defaults);j=j.concat(w.classes),k+=w.html}e=["top right","top left","bottom right","bottom left"];for(var x=0,y=e.length;y>x;x++){var z=e[x],A=k.replace("$pos",z).replace("$classes",j.join(" ")),B=document.implementation.createHTMLDocument("tempDoc");B.body.innerHTML=A,document.body.appendChild(B.body.firstChild)}f=document.getElementsByClassName(j[0]);for(var C=0,D=f.length;D>C;C++){var E=f[C];E.style.zIndex=notific8Defaults.zindex,g=notific8ContainerHandlers.onContainerCreate;for(var F=0,G=g.length;G>F;F++){var H=g[F];H(E,a)}E.addEventListener("click",function(b){var c=void 0,d=b.target,e=d.parentElement,f=a.namespace+"-notification";-1!==e.className.split(" ").indexOf(f)&&(c=notific8DataStore[e.id],h(e.id,c))})}}function o(a){a.verticalEdge=(a.verticalEdge||notific8Defaults.verticalEdge).toLowerCase(),a.horizontalEdge=(a.horizontalEdge||notific8Defaults.horizontalEdge).toLowerCase(),-1===["left","right"].indexOf(a.verticalEdge)&&(a.verticalEdge=notific8Defaults.verticalEdge),-1===["top","bottom"].indexOf(a.horizontalEdge)&&(a.horizontalEdge=notific8Defaults.horizontalEdge)}function p(a){throw console.error(a),new Error(a)}function q(a,b,c,d){var e=void 0,f=void 0,g=void 0,h=void 0,i=void 0;"string"==typeof a&&""!==a.trim()||p("moduleName should be a string"),i=["beforeContent","afterContent","beforeContainer","afterContainer","insideContainer"],"string"==typeof b&&-1!==i.indexOf(b)||p("position should be a string"),"object"!==("undefined"==typeof c?"undefined":_typeof(c))&&p("defaultOptions should be an object"),"function"!=typeof d&&p("callbackMethod should be an function"),h=notific8RegisteredModules[b];for(var j=0,k=h.length;k>j;j++)f=h[j],f.moduleName===a&&p("Module '"+a+"' has already been registered");for(g in c)e=c[g],notific8Defaults[g]=e;return notific8RegisteredModules[b].push({moduleName:a,callbackMethod:d})}function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=void 0,c=void 0;return b=16*Math.random()|0,c="x"===a?b:3&b|8,c.toString(16)})}return window.notific8Defaults={life:1e4,theme:"ocho",color:"teal",sticky:!1,verticalEdge:"right",horizontalEdge:"top",zindex:1100,closeText:"close",onInit:[],onCreate:[],onClose:[],namespace:"notific8",queue:!1},window.notific8RegisteredModules={beforeContent:[],afterContent:[],beforeContainer:[],afterContainer:[],insideContainer:[]},window.notific8Queue=[],window.notific8DataStore={},window.notific8ContainerHandlers={onContainerCreate:[]},function(b,c){var d=void 0,e=void 0,f=void 0,g=void 0,h=void 0,s=void 0,t=void 0;switch("string"!=typeof b&&p("notific8 takes a string message as the first parameter"),void 0===c&&(c={}),"object"!==("undefined"==typeof c?"undefined":_typeof(c))||c.hasOwnProperty("namespace")||"zindex"===b||(c.namespace="notific8"),b){case"configure":case"config":return i(c);case"zindex":return l(c);case"destroy":return a(c);case"remove":return j(c);case"removeFromQueue":return k(c);case"registerModule":5!==arguments.length&&p("Registering a module requires the parameters moduleName, position, defaultOptions, and callbackMethod."),b=arguments[0];var u=Array.prototype.slice.call(arguments);return g=u[1],t=u[2],f=u[3],d=u[4],q(g,t,f,d);default:return e=c.namespace+"-container",0===document.getElementsByClassName(e).length&&n(c),o(c),h=c.namespace+"-notification",s=document.getElementsByClassName(h).length,c.notificationName||(c.notificationName=r()),notific8Defaults.queue&&0!==s?notific8Queue.push({message:b,options:c}):m(b,c),c.notificationName}}}();